# AI工具公众号自动化内容生成器

## 项目简介

基于Google Gemini AI的微信公众号内容自动生成系统，支持GitHub Actions自动化部署和企业微信文件推送。

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Gemini](https://img.shields.io/badge/Google-Gemini%20AI-green.svg)](https://ai.google.dev)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ✨ 核心特性

### 🎯 智能内容生成
- 🤖 **完全免费**: 使用Google Gemini API，无需付费
- 📝 **智能写作**: AI自动生成高质量公众号文章，模拟真人博主口吻
- 📅 **内容日历**: 每周7天不同类型内容自动安排
- 🎨 **人性化风格**: 包含个人体验、真实感受，语言接地气
- 🔄 **自动运行**: 每天定时生成，无需人工干预

### 🎨 专业AI绘画提示词生成
- 🎯 **智能提示词生成**: 根据文章内容和类型自动生成专业AI绘画提示词
- 🌍 **中英文双语**: 同时提供中文和英文提示词，适配不同AI工具
- 🎨 **多风格适配**: 科技风、教程风、商务风等7种专业风格
- 📐 **尺寸优化**: 专门针对微信公众号封面2.35:1比例优化
- 🛠️ **工具推荐**: 详细的AI绘画工具对比和使用建议

### 📝 微信公众号优化
- 📱 **wx.md格式**: 直接兼容微信公众号编辑器
- 📋 **Markdown标准**: 使用标准Markdown语法，排版美观
- 🖼️ **封面图指南**: 每篇文章包含完整的封面图生成指南
- 🔗 **一键复制**: 支持wx.md网站一键复制到微信编辑器

## 📋 每周内容安排
| 星期 | 内容类型 | 示例标题 |
|------|----------|----------|
| 周一 | 新工具发现 | 🔥今日AI新发现：ChatPDF - 让PDF文档会说话 |
| 周二 | 使用教程 | 📖保姆级教程：用Midjourney轻松搞定海报设计 |
| 周三 | 案例分析 | 💡真实案例：电商如何用AI提升转化率300% |
| 周四 | 工具对比 | ⚡对决：ChatGPT vs Claude，谁更适合你？ |
| 周五 | 周报汇总 | 📊本周AI圈大事件 + 10个值得关注的工具 |
| 周六 | 互动问答 | 🤔你遇到的AI工具问题，我来解答 |
| 周日 | 资源合集 | 📚本周精选：15个免费AI工具合集 |

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 配置API密钥
编辑 `.env` 文件，设置你的Gemini API密钥：
```
GEMINI_API_KEY=your-gemini-api-key-here
```

### 3. 运行系统
```bash
python3 ai_writer.py
```

## 📁 项目结构
```
ai_content_generator/
├── ai_writer.py           # 核心内容生成器 (600行)
├── media_generator.py     # 图片和媒体生成模块 (386行)
├── quick_start.py         # 快速启动和配置脚本 (177行)
├── requirements.txt       # 项目依赖
├── .env                   # 环境配置文件
├── test_gemini.py         # API测试脚本 (自动生成)
├── data/                  # 生成的文章存储目录
│   ├── *.txt             # 原始文章文件
│   └── *.md              # wx.md格式文章 (包含封面图提示词)
├── media/                 # 生成的图片存储目录
│   ├── cover_*.png       # 封面图
│   ├── comparison_*.png  # 对比图表
│   ├── steps_*.png       # 步骤图
│   └── features_*.png    # 功能展示图
└── logs/                  # 日志文件目录
```

## 📊 已实现功能清单

### ✅ 核心功能模块
- [x] **Google Gemini AI集成** - 完整的API调用和错误处理
- [x] **多种文章类型生成** - 7种不同类型的内容模板
- [x] **智能内容规划** - 按星期自动分配内容类型
- [x] **人性化写作风格** - 模拟真人博主的口吻和体验
- [x] **自动化RSS数据收集** - 从多个源收集最新AI工具信息
- [x] **定时任务调度** - 每日08:00自动生成内容
- [x] **错误处理和重试** - 完善的异常处理机制

### ✅ AI绘画提示词生成模块
- [x] **专业提示词生成** - 根据文章内容智能生成高质量提示词
- [x] **中英文双语支持** - 同时生成中文和英文版本提示词
- [x] **多风格模板** - 7种专业风格模板（科技、教程、商务等）
- [x] **详细参数指导** - 包含场景、色彩、元素、构图等完整指导
- [x] **工具适配优化** - 针对Midjourney、DALL-E、文心一格等工具优化
- [x] **尺寸规格建议** - 微信公众号封面等多种尺寸建议
- [x] **制作流程指南** - 完整的封面图制作步骤和技巧
- [x] **色彩搭配方案** - 专业的色彩搭配建议和设计要点

### ✅ 格式化输出
- [x] **标准Markdown格式** - 完整的Markdown语法支持
- [x] **wx.md兼容格式** - 直接适配微信公众号编辑器
- [x] **AI绘画提示词生成** - 中英文双语提示词
- [x] **文章预览功能** - 生成前预览文章内容
- [x] **多格式文件保存** - 同时保存TXT和MD格式
- [x] **图片路径管理** - 自动管理生成的图片文件

### ✅ 自动化运营
- [x] **每日定时生成** - Schedule库实现的定时任务
- [x] **内容类型轮换** - 7天循环的内容规划
- [x] **文件自动归档** - 按时间戳自动命名和存储
- [x] **日志记录** - 完整的运行日志和错误记录
- [x] **即时测试模式** - 启动时立即生成测试内容

## 🎨 生成内容示例

### 文章特点
- **真实感**: 使用第一人称，包含个人使用体验
- **口语化**: 接地气的表达，像朋友聊天一样
- **实用性**: 提供具体的使用场景和操作建议
- **互动性**: 结尾询问读者感受，鼓励互动

### 配图类型
- **封面图**: 科技感渐变背景，包含标题和工具标签
- **对比图**: 柱状图对比不同工具的各项指标
- **步骤图**: 清晰的操作流程图解
- **功能图**: 网格布局展示工具核心功能
- **统计图**: 饼图和柱状图展示数据分析结果

### 文章类型与配图对应
| 文章类型 | 封面图风格 | 配图类型 | 说明 |
|----------|------------|----------|------|
| 新工具发现 | 科技蓝 | 功能展示图 | 突出工具特性 |
| 使用教程 | 温暖橙 | 步骤流程图 | 清晰的操作指南 |
| 案例分析 | 温暖橙 | 功能展示图 | 展示应用场景 |
| 工具对比 | 科技蓝 | 对比图表 | 数据化对比分析 |
| 周报汇总 | 温暖橙 | 统计图表 | 数据趋势展示 |
| 互动问答 | 温暖橙 | 功能展示图 | 问题分类展示 |
| 资源合集 | 科技蓝 | 功能展示图 | 工具分类展示 |

### wx.md格式特色
- 标准Markdown语法，直接兼容微信编辑器
- 自动生成封面图AI绘画提示词（中英文）
- 推荐多种AI绘画工具（Midjourney、DALL-E等）
- 包含完整的使用指南和技巧

## 🔧 配置说明

### 必需配置
- `GEMINI_API_KEY`: Google Gemini API密钥（必需）
  - 获取地址: https://aistudio.google.com/app/apikey
  - 免费配额充足，支持个人和小团队使用

### 可选配置
- 代理设置：系统已自动配置代理（127.0.0.1:7890）
- 调试模式：可在.env文件中设置DEBUG=True
- 测试模式：DRY_RUN=True避免真实发布

### 环境要求
- Python 3.8+
- 网络连接（访问Google API）
- 约50MB磁盘空间（存储生成的文章和图片）

## 💡 使用说明

### 快速启动流程
1. **环境初始化**: 运行 `python quick_start.py` 自动安装依赖
2. **API配置**: 编辑 `.env` 文件设置Gemini API密钥
3. **连接测试**: 运行 `python test_gemini.py` 验证API
4. **开始生成**: 运行 `python ai_writer.py` 启动系统

### 运行模式
- **即时测试**: 启动时立即生成一篇测试文章
- **定时运行**: 每天08:00自动生成新内容
- **手动停止**: 按 `Ctrl+C` 安全停止程序

### 文件管理
- **文章存储**: `data/` 目录，按时间戳命名
- **图片存储**: `media/` 目录，自动分类管理
- **日志记录**: `logs/` 目录，便于问题排查

## 🛠 技术栈

### 核心依赖
- **google-generativeai**: Google Gemini AI SDK
- **Pillow**: 图像处理和生成
- **matplotlib**: 图表和数据可视化
- **schedule**: 定时任务调度
- **feedparser**: RSS数据采集
- **requests**: HTTP请求处理
- **python-dotenv**: 环境变量管理

### 系统特性
- **跨平台支持**: Windows、macOS、Linux
- **中文字体优化**: 自动检测和使用系统中文字体
- **网络代理支持**: 自动配置代理访问Google API
- **错误恢复**: 完善的异常处理和重试机制

## 📞 技术支持

### 常见问题排查
1. **API密钥错误**: 检查 `.env` 文件中的GEMINI_API_KEY
2. **网络连接问题**: 确认可以访问Google API（可能需要代理）
3. **依赖安装失败**: 使用 `pip install -r requirements.txt` 手动安装
4. **字体显示问题**: 系统会自动检测可用字体，无需手动配置

### 调试技巧
- 查看终端输出的详细错误信息
- 检查 `logs/` 目录中的日志文件
- 使用测试脚本验证各个模块功能
- 开启DEBUG模式获取更多调试信息

## 🔮 扩展建议

### 已规划功能
- [ ] 微信公众号API集成，实现真正的自动发布
- [ ] 更多数据源接入（Product Hunt、GitHub Trending等）
- [ ] 用户反馈收集和内容优化
- [ ] SEO优化和关键词分析
- [ ] 多平台同步发布（知乎、小红书等）

### 自定义扩展
- 修改 `content_schedule` 调整内容类型安排
- 扩展 `collect_ai_tools()` 添加新的数据源
- 自定义 `MediaGenerator` 创建新的图片样式
- 调整写作风格和提示词模板

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

---

> 💡 **提示**: 这是一个完全基于免费API的解决方案，Google Gemini API提供慷慨的免费配额，足够个人和小团队长期使用。系统设计注重稳定性和可扩展性，可以根据需要轻松定制和扩展功能。
